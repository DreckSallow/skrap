<header class="header">
  <div class="header-content">
    <h1>Skrap Dashboard</h1>
    <input [value]="url" />
  </div>
</header>

<section class="content">
  <div class="query-list">
    <header class="query-header">
      <button (click)="addQuery()">Add Query +</button>
    </header>
    <ul class="query-main" (click)="toggleQueryInfo($event.target)">
      <li *ngFor="let query of queriesList; index as i">
        <div class="box-query">
          <div class="box-input">
            <h3>{{query.name}}</h3>
          </div>
          <p>{{query.isList ? "List":"Group"}}</p>
          <p>Entries: {{query.content.length}}</p>
          <button [attr.query-box-index]="i">{{query.open ? "Close":"Open"}}</button>
          <box-overlay [hiddenOnClick]="true" hiddenOnTag="LI">
            <p trigger>...</p>
            <ng-container content>
              <ul class="query-opt-menu">
                <li (click)="queyMenu('remove',i)">Delete</li>
                <li (click)="queyMenu('clean',i)">Clean</li>
              </ul>
            </ng-container>
          </box-overlay>
        </div>
        <div class="query-dropdown" *ngIf="query.open">
          <div class="query-dropdown-header">
            <button (click)="newEntryQuery(i)">New</button>
          </div>
          <div class="query-dropdown-content">
            <div *ngFor="let entry of query.content,index as entryI" class="query-dropdown-group">
              <div class="box-input">
                <input [formControl]="entry.name" />
              </div>
              <div class="box-input">
                <input [formControl]="entry.selector" (input)="queryHtml($event,i,entryI)" />
              </div>
              <div class="box-result">
                <p>
                  <small>Preview:</small>
                  {{entry.result ?? "No data"}}
                </p>
              </div>
              <div class="flex-center">
                <button (click)="removeEntry(i,entryI)">x</button>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</section>